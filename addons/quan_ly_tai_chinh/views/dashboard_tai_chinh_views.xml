<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Dashboard Tài Chính - Giao diện Overview -->
    <record id="view_dashboard_tai_chinh_overview" model="ir.ui.view">
        <field name="name">dashboard.tai.chinh.overview</field>
        <field name="model">dashboard.tai.chinh</field>
        <field name="arch" type="xml">
            <form string="Dashboard Tài Chính" create="false" edit="false" delete="false">
                <div class="o_dashboards">
                    <div class="container-fluid o_dashboard_common">
                        <!-- Header Section -->
                        <div style="font-size:25px; margin-bottom:20px;">
                            <strong>Bảng Điều Khiển Tài Chính</strong>
                            <button name="action_refresh" string="Làm Mới" type="object" class="btn btn-sm btn-primary float-right"/>
                        </div>

                        <!-- Summary Section - Phê Duyệt Mua Tài Sản -->
                        <div class="row mt16 o_dashboard_stat_cards">
                            <div class="col-lg-3 col-md-6">
                                <div class="card text-center mb-3 o_dashboard_card">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">Tổng Đơn Phê Duyệt</h5>
                                        <h2 class="card-text text-primary"><field name="tong_phe_duyet"/></h2>
                                        <small class="text-muted">Đơn</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="card text-center mb-3 o_dashboard_card">
                                    <div class="card-body">
                                        <h5 class="card-title text-warning">Chờ Phê Duyệt</h5>
                                        <h2 class="card-text text-warning"><field name="phe_duyet_cho_duyet"/></h2>
                                        <small class="text-muted">Đơn</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="card text-center mb-3 o_dashboard_card">
                                    <div class="card-body">
                                        <h5 class="card-title text-success">Đã Phê Duyệt</h5>
                                        <h2 class="card-text text-success"><field name="phe_duyet_da_duyet"/></h2>
                                        <small class="text-muted">Đơn</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="card text-center mb-3 o_dashboard_card">
                                    <div class="card-body">
                                        <h5 class="card-title text-danger">Từ Chối</h5>
                                        <h2 class="card-text text-danger"><field name="phe_duyet_bi_tu_choi"/></h2>
                                        <small class="text-muted">Đơn</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Financial Summary - Giá Trị -->
                        <div class="row mt16 o_dashboard_stats">
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Giá Trị Phê Duyệt Mua Tài Sản</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-6 text-center">
                                                <h6>Chờ Duyệt</h6>
                                                <h3 class="text-warning"><field name="gia_tri_cho_duyet" widget="monetary"/></h3>
                                            </div>
                                            <div class="col-6 text-center">
                                                <h6>Đã Duyệt</h6>
                                                <h3 class="text-success"><field name="gia_tri_da_duyet" widget="monetary"/></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-info text-white">
                                        <h5 class="mb-0">Thống Kê Tài Sản</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-6 text-center">
                                                <h6>Tổng Tài Sản</h6>
                                                <h3 class="text-info"><field name="tong_tai_san"/></h3>
                                            </div>
                                            <div class="col-6 text-center">
                                                <h6>Đang Khấu Hao</h6>
                                                <h3 class="text-primary"><field name="tai_san_dang_khau_hao"/></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Giá Trị Tài Sản Section -->
                        <div class="row mt16 o_dashboard_stats">
                            <div class="col-lg-4 col-md-6">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">Tổng Giá Trị Tài Sản</h5>
                                    </div>
                                    <div class="card-body text-center">
                                        <h3 class="text-success"><field name="tong_gia_tri_tai_san" widget="monetary"/></h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-warning text-white">
                                        <h5 class="mb-0">Tích Lũy Khấu Hao</h5>
                                    </div>
                                    <div class="card-body text-center">
                                        <h3 class="text-warning"><field name="tong_khau_hao_tich_luy" widget="monetary"/></h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-6">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-danger text-white">
                                        <h5 class="mb-0">Giá Trị Còn Lại</h5>
                                    </div>
                                    <div class="card-body text-center">
                                        <h3 class="text-danger"><field name="tong_gia_tri_con_lai" widget="monetary"/></h3>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Khấu Hao Theo Thời Gian -->
                        <div class="row mt16 o_dashboard_stats">
                            <div class="col-lg-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-info text-white">
                                        <h5 class="mb-0">Khấu Hao Theo Thời Kỳ</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-4 text-center">
                                                <h6>Tháng Này</h6>
                                                <h3 class="text-info"><field name="khau_hao_thang_nay" widget="monetary"/></h3>
                                            </div>
                                            <div class="col-4 text-center">
                                                <h6>Quý Này</h6>
                                                <h3 class="text-primary"><field name="khau_hao_quy_nay" widget="monetary"/></h3>
                                            </div>
                                            <div class="col-4 text-center">
                                                <h6>Năm Nay</h6>
                                                <h3 class="text-warning"><field name="khau_hao_nam_nay" widget="monetary"/></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bút Toán Section -->
                        <div class="row mt16 o_dashboard_stats">
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">Thống Kê Bút Toán</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-6 text-center">
                                                <h6>Tổng Bút Toán</h6>
                                                <h3 class="text-success"><field name="tong_but_toan"/></h3>
                                            </div>
                                            <div class="col-6 text-center">
                                                <h6>Đã Ghi</h6>
                                                <h3 class="text-primary"><field name="but_toan_da_ghi"/></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-warning text-white">
                                        <h5 class="mb-0">Tổng Giá Trị Bút Toán</h5>
                                    </div>
                                    <div class="card-body text-center">
                                        <h3 class="text-warning"><field name="tong_gia_tri_but_toan" widget="monetary"/></h3>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="row mt16">
                            <div class="col-lg-12">
                                <button name="action_view_phe_duyet" string="Xem Chi Tiết Phê Duyệt" type="object" class="btn btn-primary"/>
                                <button name="action_view_tai_san" string="Xem Chi Tiết Tài Sản" type="object" class="btn btn-info"/>
                                <button name="action_view_khau_hao" string="Xem Chi Tiết Khấu Hao" type="object" class="btn btn-warning"/>
                                <button name="action_view_but_toan" string="Xem Chi Tiết Bút Toán" type="object" class="btn btn-success"/>
                            </div>
                        </div>

                        <!-- Trends Section - Charts -->
                        <div class="row mt16">
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Phân Bổ Phê Duyệt Theo Trạng Thái</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="approvalStatusChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">Phân Bổ Tài Sản Theo Trạng Thái</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="assetStatusChart" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt16">
                            <div class="col-lg-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-primary text-white">
                                        <h5 class="mb-0">Xu Hướng Khấu Hao 12 Tháng</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="depreciationTrendChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt16">
                            <div class="col-lg-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">Xu Hướng Mua Sắm 12 Tháng</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="purchaseTrendChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Department Distribution -->
                        <div class="row mt16">
                            <div class="col-lg-12">
                                <div class="card mb-3 o_dashboard_card">
                                    <div class="card-header bg-info text-white">
                                        <h5 class="mb-0">Phân Bổ Theo Phòng Ban</h5>
                                    </div>
                                    <div class="card-body">
                                        <field name="department_distribution_ids">
                                            <tree string="Phân Bổ Phòng Ban" create="false" edit="false" delete="false">
                                                <field name="department_id"/>
                                                <field name="tai_san_count"/>
                                                <field name="tai_san_value" widget="monetary"/>
                                                <field name="de_xuat_count"/>
                                                <field name="de_xuat_value" widget="monetary"/>
                                                <field name="approved_count"/>
                                                <field name="approved_value" widget="monetary"/>
                                            </tree>
                                        </field>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </field>
    </record>

    <!-- Dashboard Tài Chính Search View -->
    <record id="view_dashboard_tai_chinh_search" model="ir.ui.view">
        <field name="name">dashboard.tai.chinh.search</field>
        <field name="model">dashboard.tai.chinh</field>
        <field name="arch" type="xml">
            <search string="Tìm Kiếm Dashboard Tài Chính">
                <field name="name"/>
            </search>
        </field>
    </record>

    <!-- Dashboard Tài Chính Action -->
    <record id="action_dashboard_tai_chinh" model="ir.actions.act_window">
        <field name="name">Dashboard Tài Chính</field>
        <field name="res_model">dashboard.tai.chinh</field>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_dashboard_tai_chinh_overview"/>
        <field name="target">main</field>
    </record>
</odoo>
